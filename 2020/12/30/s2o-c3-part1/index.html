<!doctype html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta><title>《剑指Offer》第3章笔记 高质量代码 P1 - 画码余生</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="画码余生"><meta name="msapplication-TileImage" content="/images/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="画码余生"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="除了程序代码的正确性，经常我们还要关注它的鲁棒性。"><meta property="og:type" content="blog"><meta property="og:title" content="《剑指Offer》第3章笔记 高质量代码 P1"><meta property="og:url" content="https://yumi-cn.github.io/2020/12/30/s2o-c3-part1/"><meta property="og:site_name" content="画码余生"><meta property="og:description" content="除了程序代码的正确性，经常我们还要关注它的鲁棒性。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://yumi-cn.github.io/images/s2o-c3-part1-f1.jpg"><meta property="article:published_time" content="2020-12-30T11:05:35.000Z"><meta property="article:modified_time" content="2020-12-30T11:14:58.937Z"><meta property="article:author" content="Yumiko"><meta property="article:tag" content="笔记"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/images/s2o-c3-part1-f1.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://yumi-cn.github.io/2020/12/30/s2o-c3-part1/"},"headline":"画码余生","image":["https://yumi-cn.github.io/images/s2o-c3-part1-f1.jpg"],"datePublished":"2020-12-30T11:05:35.000Z","dateModified":"2020-12-30T11:14:58.937Z","author":{"@type":"Person","name":"Yumiko"},"description":"除了程序代码的正确性，经常我们还要关注它的鲁棒性。"}</script><link rel="canonical" href="https://yumi-cn.github.io/2020/12/30/s2o-c3-part1/"><link rel="alternate" href="/atom.xml" title="画码余生" type="application/atom+xml"><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/logo.jpg" alt="画码余生" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章</a><a class="navbar-item" href="/categories">专栏</a><a class="navbar-item" href="/tags">主题</a><a class="navbar-item" href="/about">关于我</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Github" href="https://github.com/yumi-cn"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-12-30T11:05:35.000Z" title="2020-12-30T11:05:35.000Z">2020-12-30</time>发表</span><span class="level-item"><time datetime="2020-12-30T11:14:58.937Z" title="2020-12-30T11:14:58.937Z">2020-12-30</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%89%91%E6%8C%87Offer/">剑指Offer</a></span><span class="level-item">32 分钟读完 (大约4843个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">《剑指Offer》第3章笔记 高质量代码 P1</h1><div class="content"><blockquote><p>除了程序代码的正确性，经常我们还要关注它的鲁棒性。</p></blockquote><a id="more"></a><h2 id="1-面试官谈代码质量"><a href="#1-面试官谈代码质量" class="headerlink" title="1 面试官谈代码质量"></a>1 面试官谈代码质量</h2><blockquote><p>“一般会考查应聘人员对代码的容错处理能力，对一些特别的输入会询问应聘人员是否考虑、如何处理。不能容忍代码只是针对一种假想的‘正常值’进行处理，不考虑异常状况，也不考虑资源的回收等问题。”</p><p>—— 殷焰（支付宝，高级安全测试工程师）</p></blockquote><blockquote><p>“如果是因为粗心犯错，则可以原谅，因为毕竟面试的时候会紧张；不能容忍的是，该掌握的知识点却没有掌握，而且提醒了还不知道。”</p><p>—— 马凌洲（Autodesk，软件开发经理）</p></blockquote><blockquote><p>“最不能容忍功能错误，忽略边界情况。”</p><p>—— 尹彦（英特尔，软件工程师）</p></blockquote><blockquote><p>“如果一个程序员连变量、函数命名都毫无章法，解决一个具体问题都找不到一个最合适的数据结构，那么这会让面试官对他的印象大打折扣，因为这只能说明他程序写得太少，不够熟悉。”</p><p>—— 吴斌（英伟达，图形设计师）</p></blockquote><blockquote><p>“我会从程序的正确性和鲁棒性两方面检验代码的质量。会关注对输入参数的检查、处理错误和异常的方式、命名方式等。对于没有工作经验的学生，程序正确性之外的错误基本都能容忍，但经过提示后希望能够很快解决。对于有工作经验的人，不能容忍考虑不周到，有明显的鲁棒性错误。”</p><p>—— 田超（微软，SDE ||）</p></blockquote><hr><h2 id="2-代码的规范性"><a href="#2-代码的规范性" class="headerlink" title="2 代码的规范性"></a>2 代码的规范性</h2><p>面试官会根据应聘者写出的代码来决定是否录用他，如果应聘者代码写的不够规范，影响面试官阅读代码的兴致，那么面试官就会默默地减去几分。<strong>书写、布局和命名</strong>都决定着代码的规范性。</p><div align="center"><p><img src="/images/s2o-c3-part1-f1.jpg" alt="影响代码规范性的因素"></p></div><p>首先，<strong>清晰的规范的代码书写</strong>。写的慢一点也可以，把字母、数字、符号写清楚。</p><p>其次，<strong>清晰的规范的代码布局</strong>。缩进、对齐的一些布局格式要注意统一。</p><p>最后，<strong>合理的规范的代码命名</strong>。建议在写代码时，用完整的英文单词组合命名变量和函数。比如函数传入一个二叉树的根节点作为参数，则可以把该参数命名为<code>BinaryTreeNode* pRoot</code>，不用觉得这样多写字母会麻烦，如果一眼能看出变量、函数的用途，应聘者就能避免搞混淆而犯一些低级错误（除了循环量<code>i,j,k</code>这种，其他都要注意），同时合理的命名也能让面试官一眼读懂代码的意图。</p><hr><h2 id="3-代码的完整性"><a href="#3-代码的完整性" class="headerlink" title="3 代码的完整性"></a>3 代码的完整性</h2><p>面试官会通过检查代码是否完整来考查应聘者的思维是否全面，一般会检查代码是否完成了基本功能、输入边界值是否能得到正确地输出、是否对各种不合规范的非法输入做出了合理的错误处理。</p><h3 id="3-1-3个方面确保完整性"><a href="#3-1-3个方面确保完整性" class="headerlink" title="3.1 3个方面确保完整性"></a>3.1 3个方面确保完整性</h3><p>咕咕待更。</p><h3 id="3-2-3种错误处理的方法"><a href="#3-2-3种错误处理的方法" class="headerlink" title="3.2 3种错误处理的方法"></a>3.2 3种错误处理的方法</h3><p>咕咕待更。</p><h3 id="3-3-面试题-16-21"><a href="#3-3-面试题-16-21" class="headerlink" title="3.3 面试题 16-21"></a>3.3 面试题 16-21</h3><blockquote><p>面试题16：数值的整数次方。</p></blockquote><p>实现函数<code>double Power(double base, int exponent)</code>，求<code>base</code>的<code>exponent</code>次方，不得使用库函数，不需要考虑大数问题（只考虑结果在double的表达范围）。</p><p>完整实现代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> g_invalid_input = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">double</span> eps = <span class="number">1e-8</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">equal</span><span class="params">(<span class="keyword">double</span> lhs, <span class="keyword">double</span> rhs)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> big = (lhs &gt; rhs)?lhs:rhs;</span><br><span class="line">    <span class="keyword">double</span> small = (big != lhs)?lhs:rhs;</span><br><span class="line">    <span class="keyword">return</span> (big - small) &lt;= eps;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">power_with_unsigned_exp</span><span class="params">(<span class="keyword">double</span> base, <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="built_in">exp</span>)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// exp只为正数，内部只关心几次方的计算</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">exp</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">exp</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> base;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 考虑用递归数学公式来加速幂计算</span></span><br><span class="line">        <span class="comment">// exp &gt;&gt; 1，int右移1位，等价于除以2向下取整，优化计算速度</span></span><br><span class="line">        <span class="keyword">double</span> result = power_with_unsigned_exp(base, <span class="built_in">exp</span> &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        result *= result;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">exp</span> &amp; <span class="number">0x1</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 判断是否为奇数，这种方式比 % 2 == 0，速度更快</span></span><br><span class="line">            result *= base;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">power</span><span class="params">(<span class="keyword">double</span> base, <span class="keyword">int</span> <span class="built_in">exp</span>)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 考虑exp 为正、为负、为0的情况</span></span><br><span class="line"></span><br><span class="line">    g_invalid_input = <span class="literal">false</span>; <span class="comment">// 初始化全局变量</span></span><br><span class="line">    <span class="keyword">if</span>(equal(base, <span class="number">0.0</span>) &amp;&amp; <span class="built_in">exp</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        g_invalid_input = <span class="literal">true</span>; <span class="comment">// 也可以考虑其他错误处理方式</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> abs_exp = (<span class="keyword">unsigned</span> <span class="keyword">int</span>)((<span class="built_in">exp</span> &lt; <span class="number">0</span>)?-<span class="built_in">exp</span>:<span class="built_in">exp</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> result = power_with_unsigned_exp(base, abs_exp);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">exp</span> &lt; <span class="number">0</span>)?(<span class="number">1.0</span> / result):(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; power(<span class="number">2</span>, <span class="number">4</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// 16</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; power(<span class="number">10</span>, <span class="number">5</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// 100000</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; power(<span class="number">13</span>, <span class="number">-2</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// 0.00591716</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; power(<span class="number">0</span>, <span class="number">0</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><blockquote><p>面试题17：打印从1到最大的n位数。</p></blockquote><p>输入数字<code>n</code>，按顺序打印出<code>1</code>到最大的<code>n</code>位十进制数。比如输入3，从1、2、3一直打印到最大的3位数999。</p><p>用字符串模拟大数加法进位的方式：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">char</span>* number)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 对于前面的空0，不再打印</span></span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(number);</span><br><span class="line">    <span class="keyword">bool</span> begin = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!begin &amp;&amp; number[i] == <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(!begin &amp;&amp; number[i] != <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">            begin = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, number[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">increment</span><span class="params">(<span class="keyword">char</span>* number)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> is_overflow = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">int</span> carry = <span class="number">0</span>; <span class="comment">// 进位量</span></span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(number);</span><br><span class="line">    <span class="comment">// 模拟加法进位</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = number[i] - <span class="string">&#x27;0&#x27;</span> + carry;</span><br><span class="line">        <span class="keyword">if</span>(i == len - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 末位加1 increment</span></span><br><span class="line">            sum++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(sum &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 已经在最高位，进位就溢出了</span></span><br><span class="line">                is_overflow = <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                carry = <span class="number">1</span>;</span><br><span class="line">                sum -= <span class="number">10</span>;</span><br><span class="line">                number[i] = <span class="string">&#x27;0&#x27;</span> + sum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            number[i] = <span class="string">&#x27;0&#x27;</span> + sum;</span><br><span class="line">            carry = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> is_overflow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_1_to_n_max</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span>* number = <span class="keyword">new</span> <span class="keyword">char</span>[n + <span class="number">1</span>]; <span class="comment">// 多一位给结尾符 \0</span></span><br><span class="line">    <span class="built_in">memset</span>(number, <span class="string">&#x27;0&#x27;</span>, n);</span><br><span class="line">    number[n] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!increment(number)) &#123;</span><br><span class="line">        print(number);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span>[] number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    print_1_to_n_max(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>还可以考虑用全排列的方式，就不用再考虑进位的问题，代码就简洁了很多：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">char</span>* number)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 对于前面的空0，不再打印</span></span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(number);</span><br><span class="line">    <span class="keyword">bool</span> begin = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!begin &amp;&amp; number[i] == <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(!begin &amp;&amp; number[i] != <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">            begin = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, number[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(begin == <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>); <span class="comment">// 修正部分，不打印全0的情况</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_1_to_n_max_rec</span><span class="params">(<span class="keyword">char</span>* number, <span class="keyword">int</span> len, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(index == len) &#123;</span><br><span class="line">        print(number);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        number[index] = i + <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        print_1_to_n_max_rec(number, len, index + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_1_to_n_max_permutation</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">char</span>* number = <span class="keyword">new</span> <span class="keyword">char</span>[n + <span class="number">1</span>];</span><br><span class="line">    <span class="built_in">memset</span>(number, <span class="string">&#x27;0&#x27;</span>, n);</span><br><span class="line">    number[n] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    print_1_to_n_max_rec(number, n, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span>[] number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    print_1_to_n_max_permutation(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不过全排列的方法有一个容易忽略的漏洞，就算按照书上的代码运行，会出现一个多余的打印情况<code>print(&quot;000&quot;)</code>，这是因为这是全排列的起点，而想修改全排列的起点为<code>001</code>还稍微有点麻烦，这个时候你会发现其实<code>print</code>并不会把<code>000</code>打印出来，但是会多打印一个<code>\n</code>换行，所以只要简单修改一下<code>print</code>，让其只在非<code>000</code>的情况下才换行，这样看起来我们的输出起点就是<code>1</code>了。</p><hr><blockquote><p>面试题18：删除链表的节点。</p></blockquote><p><strong>题目一</strong>：在O(1)的时间内删除链表节点。</p><p>给定单向链表的头指针和一个节点指针，定义一个函数在<code>O(1)</code>时间内删除该节点。链表节点与函数的定义如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    node* pnext;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delete_node</span><span class="params">(node** phead, node* pdelete)</span></span>;</span><br></pre></td></tr></table></figure><p>完整实现代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    node* pnext;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">node* <span class="title">init_node</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    node* pnode = <span class="keyword">new</span> node;</span><br><span class="line">    pnode-&gt;value = value;</span><br><span class="line">    pnode-&gt;pnext = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">return</span> pnode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert_node</span><span class="params">(node** phead, node* pnode)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(*phead == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        *phead = pnode;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    node* temp = *phead;</span><br><span class="line">    <span class="keyword">while</span>(temp-&gt;pnext != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        temp = temp-&gt;pnext;</span><br><span class="line">    &#125;</span><br><span class="line">    temp-&gt;pnext = pnode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delete_node</span><span class="params">(node** phead, node* pdelete)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!phead || !pdelete) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(pdelete-&gt;pnext != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="comment">// 删除非尾节点，拷贝节点</span></span><br><span class="line">        node* pnext = pdelete-&gt;pnext;</span><br><span class="line">        pdelete-&gt;value = pnext-&gt;value;</span><br><span class="line">        pdelete-&gt;pnext = pnext-&gt;pnext;</span><br><span class="line">        <span class="comment">// 删除节点</span></span><br><span class="line">        <span class="keyword">delete</span> pnext;</span><br><span class="line">        pnext = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(*phead == pdelete) &#123;</span><br><span class="line">        <span class="comment">// 删除尾节点，并且链表只有一个节点</span></span><br><span class="line">        <span class="keyword">delete</span> pdelete;</span><br><span class="line">        pdelete = <span class="literal">nullptr</span>;</span><br><span class="line">        *phead = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 删除尾节点，只能从头找起</span></span><br><span class="line">        node* pnode = *phead;</span><br><span class="line">        <span class="keyword">while</span>(pnode-&gt;pnext != pdelete) &#123;</span><br><span class="line">            pnode = pnode-&gt;pnext;</span><br><span class="line">        &#125;</span><br><span class="line">        pnode-&gt;pnext = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="keyword">delete</span> pdelete;</span><br><span class="line">        pdelete = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(node** phead)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(*phead == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    node* pnode = *phead;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, pnode-&gt;value);</span><br><span class="line">    <span class="keyword">while</span>(pnode-&gt;pnext != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        pnode = pnode-&gt;pnext;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, pnode-&gt;value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    node** phead = <span class="keyword">new</span> node*;</span><br><span class="line">    *phead = <span class="literal">nullptr</span>;</span><br><span class="line">    node** node_list = <span class="keyword">new</span> node*[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        node* new_node = init_node(i);</span><br><span class="line">        node_list[i] = new_node;</span><br><span class="line">        insert_node(phead, new_node);</span><br><span class="line">    &#125;</span><br><span class="line">    print(phead); <span class="comment">// 0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">    <span class="comment">// 删除头节点</span></span><br><span class="line">    delete_node(phead, node_list[<span class="number">0</span>]);</span><br><span class="line">    <span class="comment">// 删除尾节点</span></span><br><span class="line">    delete_node(phead, node_list[<span class="number">9</span>]);</span><br><span class="line">    <span class="comment">// 删除中间节点</span></span><br><span class="line">    delete_node(phead, node_list[<span class="number">5</span>]);</span><br><span class="line">    print(phead); <span class="comment">// 1 2 3 4 6 7 8</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码有三个需要讨论的地方：</p><ol><li><strong>关于时间复杂度</strong>，如果是尾节点，则需要<code>O(n)</code>时间，如果是非尾节点，则需要<code>O(1)</code>时间，平均情况下<code>[(n-1)*O(1) + O(n)]/n = O(1)</code>，这也是书上说明的情况，<strong>但如果你真的要较真</strong>，你说：“我就是尾节点也想做到<code>O(1)</code>时间，可不可以？” 我说当然可以，再细想一下尾节点需要<code>O(n)</code>的原因，因为我们没有办法知道它的前一个节点是什么，那整个链表里面有没有什么地方是可以让我们保留一个额外的指针的地方呢？当然有，那就是尾节点没有利用起来的<code>pnext</code>，如果你将尾节点的<code>pnext</code>指向它的前一个节点，那自然删除也只需要<code>O(1)</code>时间了，当然这会影响到一些其他过程，例如判断达到尾节点的方式就和以往的<code>pnode-&gt;pnext == nullptr</code>不同了，但方法终归是可行的，尤其是如果面试官再进一步问是否还可以更优化时；</li><li><strong>上述代码仍然不是完美代码</strong>，主要是指的完整性上，因为它基于一个假设：<strong>要删除的节点的确在链表中</strong>，需要<code>O(n)</code>的时间才能判断链表中是否包含某一个节点（不借助其他数据结构情况下），受到题目的<code>O(1)</code>时间限制，所以这部分就没有再考虑了，可以和面试官进行说明；</li><li>代码中用来<strong>删除节点的部分</strong>，用了一个保存节点的<code>node_list</code>数组，但这个数组中的节点情况并不会一直地和链表的节点情况保持一致，因为方法中涉及到了节点的拷贝，取决于删除的情况，数组<code>i</code>位置保存节点的<code>value</code>很有可能并不是<code>i</code>，也有可能链表中<code>i</code>值的节点还在，而<code>node_list</code>中<code>i</code>位置的指针已经被设置为<code>nullptr</code>。</li></ol><p><strong>题目二</strong>：删除链表中重复的节点。</p><p>在一个<strong>排序的链表</strong>中，如何删除重复的节点？</p><p>PS：这道题在书上的图3.4应该是打印出错了，初始链表的几个节点都没有打全，总之就是链表中重复的节只保留一个。另外，注意题目中的<strong>已排序</strong>条件。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    node* pnext;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delete_duplication</span><span class="params">(node** phead)</span></span>;</span><br></pre></td></tr></table></figure><p>完整实现代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    node* pnext;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">node* <span class="title">init_node</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123; ... &#125;; <span class="comment">// 和上面代码的相同</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert_node</span><span class="params">(node** phead, node* pnode)</span> </span>&#123; ... &#125;; <span class="comment">// 和上面代码的相同</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(node** phead)</span> </span>&#123; ... &#125;; <span class="comment">// 和上面代码的相同</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delete_duplication</span><span class="params">(node** phead)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(phead == <span class="literal">nullptr</span> || *phead == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    node* pprenode = <span class="literal">nullptr</span>;</span><br><span class="line">    node* pnode = *phead;</span><br><span class="line">    <span class="keyword">while</span>(pnode != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        node* pnext = pnode-&gt;pnext;</span><br><span class="line">        <span class="keyword">bool</span> need_delete = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(pnext != <span class="literal">nullptr</span> &amp;&amp; pnext-&gt;value == pnode-&gt;value) &#123;</span><br><span class="line">            need_delete = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pprenode = pnode; <span class="comment">// 修改的代码</span></span><br><span class="line">        <span class="keyword">if</span>(!need_delete) &#123;</span><br><span class="line">            <span class="comment">// pprenode = pnode; // 原代码</span></span><br><span class="line">            pnode = pnode-&gt;pnext;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> value = pnode-&gt;value;</span><br><span class="line">            node* ptobedel = pnext; <span class="comment">// 修改的代码</span></span><br><span class="line">            <span class="comment">// node* ptobedel = pnode; // 原代码</span></span><br><span class="line">            <span class="keyword">while</span>(ptobedel != <span class="literal">nullptr</span> &amp;&amp; ptobedel-&gt;value == value) &#123;</span><br><span class="line">                pnext = ptobedel-&gt;pnext;</span><br><span class="line">                <span class="keyword">delete</span> ptobedel;</span><br><span class="line">                ptobedel = <span class="literal">nullptr</span>;</span><br><span class="line">                ptobedel = pnext;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(pprenode == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">                *phead = pnext;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                pprenode-&gt;pnext = pnext;</span><br><span class="line">            &#125;</span><br><span class="line">            pnode = pnext;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    node** phead = <span class="keyword">new</span> node*;</span><br><span class="line">    *phead = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        node* new_node = init_node(i / <span class="number">2</span>);</span><br><span class="line">        insert_node(phead, new_node);</span><br><span class="line">    &#125;</span><br><span class="line">    print(phead); <span class="comment">// 0 0 1 1 2 2 3 3 4 4</span></span><br><span class="line">    delete_duplication(phead);</span><br><span class="line">    print(phead); <span class="comment">// 0 1 2 3 4</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>init_node</code>、<code>insert_node</code>以及<code>print</code>函数均和18题题目一的代码相同，不再赘述。</p><p>PS：需要说明的一点是，书上的<code>delete_duplication</code>代码和我这里所写的代码有细微差别，原因是<strong>对原题目的理解偏差问题</strong>，如果原题目所说的<strong>删除重复的节点</strong>不需要留下一个被重复的节点（即一个都不留），则看上面代码的原代码部分，如果是需要保留一个节点，就看修改后的部分。</p><hr><blockquote><p>面试题19：正则表达式匹配</p></blockquote><p>题目：请实现一个函数用来匹配包含 <code>.</code> 和 <code>*</code> 的正则表达式。模式中的字符 <code>.</code> 表示任意一个字符，而 <code>*</code> 表示它前面的字符可以出现任意次（含0次），匹配是指<strong>字符串的所有字符匹配整个模式</strong>，例如，字符串 <code>&quot;aaa&quot;</code> 与模式 <code>a.a</code> 和 <code>ab*ac*a</code> 匹配，但与 <code>aa.a</code> 和 <code>ab*a</code> 均不匹配。</p><p>遇到字符时，和模式串的对应字符进行比较：</p><ul><li>如果是<strong>普通字符</strong>，则直接比较匹配，后移指针；</li><li>如果是 <code>.</code>，匹配任意字符，后移指针；</li><li>如果发现字符的下一位是 <code>*</code>，就有两种情况了：<ul><li>如果是<strong>再匹配一次</strong>的情况，先检验是否匹配，如果匹配，则字符串指针后移，匹配串指针不后移；如果不匹配，则只能考虑将匹配串指针后移两位(跳过<code>*</code>)；</li><li>如果是<strong>不再匹配一次</strong>的情况，匹配串指针后移两位（跳过<code>*</code>）；</li><li>两种情况都要考虑到，所以需要用到递归来判断其中一个分支是否可行。</li></ul></li></ul><p>完整实现代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">match_core</span><span class="params">(<span class="keyword">char</span>* str, <span class="keyword">char</span>* pattern)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c %c \n&quot;</span>, *str, *pattern);</span><br><span class="line">    <span class="keyword">if</span>(*str == <span class="string">&#x27;\0&#x27;</span> &amp;&amp; *pattern == <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(*str != <span class="string">&#x27;\0&#x27;</span> &amp;&amp; *pattern == <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(*(pattern + <span class="number">1</span>) == <span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>((*pattern == <span class="string">&#x27;.&#x27;</span> &amp;&amp; *str != <span class="string">&#x27;\0&#x27;</span>) || *str == *pattern) &#123;</span><br><span class="line">            <span class="keyword">return</span> match_core(str + <span class="number">1</span>, pattern) || match_core(str, pattern + <span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> match_core(str, pattern + <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>((*pattern == <span class="string">&#x27;.&#x27;</span> &amp;&amp; *str != <span class="string">&#x27;\0&#x27;</span>) || *str == *pattern) &#123;</span><br><span class="line">        <span class="keyword">return</span> match_core(str + <span class="number">1</span>, pattern + <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">match</span><span class="params">(<span class="keyword">char</span>* str, <span class="keyword">char</span>* pattern)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(str == <span class="literal">nullptr</span> || pattern == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> match_core(str, pattern);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">100</span>] = <span class="string">&quot;aaa&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span> pattern[<span class="number">100</span>] = <span class="string">&quot;ab*ac*a&quot;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Match? %s \n&quot;</span>, match(str, pattern) ? <span class="string">&quot;true&quot;</span> : <span class="string">&quot;false&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码中，需要注意的一个点是，对于匹配串的字符是<code>.</code>时，不能只是简单的只看匹配串，还要看<strong>被匹配串是否有字符可以匹配</strong>，所以不能只是简单地写为<code>if(*pattern == &#39;.&#39; || ...)</code>，应该写为<code>if((*pattern == &#39;.&#39; &amp;&amp; *str != &#39;\0&#39;) || ...)</code>，如果忽略这个细节，你不会在题目提供的几个输入输出上发现问题，但如果你多尝试其他的输入输出，尤其是当匹配串为<code>.*</code>(匹配任意字符)，你会发现结果是错误的。</p><hr><blockquote><p>面试题20：表示数值的字符串</p></blockquote><p>实现一个函数用来判断字符串是否表示数值（包括整数和小数），例如字符串<code>&quot;+100&quot;</code>、<code>&quot;5e2&quot;</code>、<code>&quot;-123&quot;</code>、<code>&quot;3.1416&quot;</code>及<code>&quot;-1E-16&quot;</code>都表示数值，但<code>&quot;12e&quot;</code>、<code>&quot;1a3.14&quot;</code>、<code>&quot;1.2.3&quot;</code>、<code>&quot;+-5&quot;</code>及<code>&quot;12e+5.4&quot;</code>都不是。</p><p>表示数值的字符串遵循模式 <code>A[.[B]][e|EC]</code> 或者 <code>.B[e|EC]</code>，其中A为数值的整数部分，B紧跟小数点为数值的小数部分，C紧跟着<code>e</code>或者<code>E</code>为数值的指数部分。A和C都是可能以<code>+</code>或者<code>-</code>开头的<code>0~9</code>的数位串，B也是<code>0~9</code>的数位串，但前面不能有正负号。</p><p>完整实现代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">scan_unsigned_inter</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>** str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* before = *str;</span><br><span class="line">    <span class="keyword">while</span>(**str != <span class="string">&#x27;\0&#x27;</span> &amp;&amp; **str &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; **str &lt;= <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">        (*str)++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *str &gt; before;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">scan_integer</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>** str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(**str == <span class="string">&#x27;+&#x27;</span> || **str == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">        (*str)++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> scan_unsigned_inter(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">is_numberic</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(str == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// A[.[B]][e|EC] 或者 .B[e|EC]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查A部分</span></span><br><span class="line">    <span class="keyword">bool</span> a_is_numeric = scan_integer(&amp;str);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> b_is_numeric = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// 如果碰到小数点，检查B部分</span></span><br><span class="line">    <span class="keyword">if</span>(*str == <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">        str++;</span><br><span class="line">        b_is_numeric = scan_unsigned_inter(&amp;str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> c_is_numeric = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// 如果碰到e或E，检查C部分</span></span><br><span class="line">    <span class="keyword">if</span>(*str == <span class="string">&#x27;e&#x27;</span> || *str == <span class="string">&#x27;E&#x27;</span>) &#123;</span><br><span class="line">        str++;</span><br><span class="line">        c_is_numeric = scan_integer(&amp;str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> all_scan = (*str == <span class="string">&#x27;\0&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// (A || B) &amp;&amp; C &amp;&amp; End</span></span><br><span class="line">    <span class="keyword">return</span> (a_is_numeric || b_is_numeric) &amp;&amp; c_is_numeric &amp;&amp; all_scan;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_is_numberic</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* str)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s %s\n&quot;</span>, str, is_numberic(str)?<span class="string">&quot;yes&quot;</span>:<span class="string">&quot;no&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    print_is_numberic(<span class="string">&quot;+100&quot;</span>); <span class="comment">// +100 yes</span></span><br><span class="line">    print_is_numberic(<span class="string">&quot;5e2&quot;</span>); <span class="comment">// 5e2 yes</span></span><br><span class="line">    print_is_numberic(<span class="string">&quot;-123&quot;</span>); <span class="comment">// -123 yes</span></span><br><span class="line">    print_is_numberic(<span class="string">&quot;3.1416&quot;</span>); <span class="comment">// 3.1416 yes</span></span><br><span class="line">    print_is_numberic(<span class="string">&quot;-1E-16&quot;</span>); <span class="comment">// -1E-16 yes</span></span><br><span class="line">    print_is_numberic(<span class="string">&quot;12e&quot;</span>); <span class="comment">// 12e no</span></span><br><span class="line">    print_is_numberic(<span class="string">&quot;1a3.14&quot;</span>); <span class="comment">// 1a3.14 no</span></span><br><span class="line">    print_is_numberic(<span class="string">&quot;1.2.3&quot;</span>); <span class="comment">// 1.2.3 no</span></span><br><span class="line">    print_is_numberic(<span class="string">&quot;+-5&quot;</span>); <span class="comment">// +-5 no</span></span><br><span class="line">    print_is_numberic(<span class="string">&quot;12e+5.4&quot;</span>); <span class="comment">// 12e+5.4 no</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码中需要注意的一个点是，书上原代码中是把各部分判断拆开计算逻辑合并的，但是我为了更加直观地写出其中逻辑思路，将各部分的判断都留到了最后，最后我们如果稍微一疏忽，容易就写成<code>A || B &amp;&amp; C &amp;&amp; End</code>，在C++中，<strong>逻辑运算符的结合反向是从左到右的</strong>，所以有可能你会把这种写法理解成<code>(A || B) &amp;&amp; C &amp;&amp; End</code>，<strong>但是</strong>，<strong>逻辑运算符之间的优先级顺序是</strong>，<code>! &gt; &amp;&amp; &gt; ||</code>，这会导致计算结果等价于<code>A || (B &amp;&amp; C &amp;&amp; End)</code>，即只要<code>A==true</code>就会判定为数字，这当然不正确的，所以要得到正确的结果，应该显式的写为<code>(A || B) &amp;&amp; C &amp;&amp; End</code>，避免计算错误。</p><hr><blockquote><p>面试题21：调整数组顺序使奇数位于偶数前面</p></blockquote><p>输入一个整数数组，实现一个函数来调整该数组中数字的顺序，使得<strong>所有奇数位于数组的前半部分</strong>，<strong>所有偶数位于数组的后半部分</strong>。</p><p>针对这道题的最优解法，在数组头尾设置两个指针，依次开始向中间扫描，如果左指针遇到偶数则停下，右指针遇到奇数则停下，然后交换两个指针指向的内容，直到两个指针相遇，算法停止，最后结果满足题目要求。</p><p>完整实现代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reorder_odd_even</span><span class="params">(<span class="keyword">int</span>* <span class="built_in">array</span>, <span class="keyword">unsigned</span> <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">array</span> == <span class="literal">nullptr</span> || len == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>* pleft = <span class="built_in">array</span>;</span><br><span class="line">    <span class="keyword">int</span>* pright = <span class="built_in">array</span> + len - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(pleft &lt; pright) &#123;</span><br><span class="line">        <span class="comment">// 左指针遇到偶数停</span></span><br><span class="line">        <span class="keyword">while</span>(pleft &lt; pright &amp;&amp; (*pleft &amp; <span class="number">0x1</span>) != <span class="number">0</span>) &#123;</span><br><span class="line">            pleft++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 右指针遇到奇数停</span></span><br><span class="line">        <span class="keyword">while</span>(pleft &lt; pright &amp;&amp; (*pright &amp; <span class="number">0x1</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">            pright--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> temp = *pleft;</span><br><span class="line">        *pleft = *pright;</span><br><span class="line">        *pright = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">array</span>[<span class="number">10</span>] = &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    reorder_odd_even(<span class="built_in">array</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, <span class="built_in">array</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3 7 9 1 5 6 8 2 0 4</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可扩展的解法，不固定其中的判别逻辑，可以将<strong>任意两类定义的数据</strong>进行这样的前后分离：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里用到的是一个函数指针，将一个函数传给另一个函数内部使用</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reorder</span><span class="params">(<span class="keyword">int</span>* <span class="built_in">array</span>, <span class="keyword">unsigned</span> <span class="keyword">int</span> len, <span class="keyword">bool</span> (*func)(<span class="keyword">int</span>))</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">array</span> == <span class="literal">nullptr</span> || len == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>* pleft = <span class="built_in">array</span>;</span><br><span class="line">    <span class="keyword">int</span>* pright = <span class="built_in">array</span> + len - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(pleft &lt; pright) &#123;</span><br><span class="line">        <span class="comment">// 左指针遇到偶数停</span></span><br><span class="line">        <span class="keyword">while</span>(pleft &lt; pright &amp;&amp; !func(*pleft)) &#123;</span><br><span class="line">            pleft++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 右指针遇到奇数停</span></span><br><span class="line">        <span class="keyword">while</span>(pleft &lt; pright &amp;&amp; func(*pright)) &#123;</span><br><span class="line">            pright--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> temp = *pleft;</span><br><span class="line">        *pleft = *pright;</span><br><span class="line">        *pright = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">is_even</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (n &amp; <span class="number">0x1</span>) == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">is_odd</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (n &amp; <span class="number">0x1</span>) != <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">array</span>[<span class="number">10</span>] = &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    reorder(<span class="built_in">array</span>, <span class="number">10</span>, is_even);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, <span class="built_in">array</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3 7 9 1 5 6 8 2 0 4</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    reorder(<span class="built_in">array</span>, <span class="number">10</span>, is_odd);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, <span class="built_in">array</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4 0 2 8 6 5 1 9 7 3</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="4-代码的鲁棒性"><a href="#4-代码的鲁棒性" class="headerlink" title="4 代码的鲁棒性"></a>4 代码的鲁棒性</h2><p>请到《第3章笔记 高质量代码 P2》阅读这部分内容。</p></div><div class="article-licensing box"><div class="licensing-title"><p>《剑指Offer》第3章笔记 高质量代码 P1</p><p><a href="https://yumi-cn.github.io/2020/12/30/s2o-c3-part1/">https://yumi-cn.github.io/2020/12/30/s2o-c3-part1/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Yumiko</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-12-30</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2020-12-30</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/images/zfb.jpg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/images/wx.jpg" alt="微信"></span></a><a class="button donate" href="https://afdian.net/@yumiko-cn" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/01/01/s2o-c3-part2/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">《剑指Offer》第3章笔记 高质量代码 P2</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/12/23/plan-2021-01/"><span class="level-item">1月的计划</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk=new Gitalk({id:"f5162af3c20f578820e250a10914b880",repo:"yumi-cn.github.io",owner:"yumi-cn",clientID:"30141472b2ad1cb657d1",clientSecret:"80e26278051f7251bd46f5ec93317fec6675a7b4",admin:["yumi-cn"],createIssueManually:!1,distractionFreeMode:!1,perPage:20,pagerDirection:"last",enableHotKey:!0,language:"zh-CN"});gitalk.render("comment-container")</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/images/avatar.jpg" alt="Yumiko"></figure><p class="title is-size-4 is-block" style="line-height:inherit">Yumiko</p><p class="is-size-6 is-block">游戏/引擎/技美</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国 杭州</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">26</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">专栏</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">主题</p><a href="/tags"><p class="title">1</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/yumi-cn" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/yumi-cn"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Bilibili" href="https://space.bilibili.com/11413916"><i class="fab fa-youtube"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Pixiv" href="https://www.pixiv.net/users/25096815"><i class="fas fa-palette"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">专栏</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/3D%E6%B8%B8%E6%88%8F%E4%B8%8E%E5%9B%BE%E5%BD%A2%E5%AD%A6%E7%9A%84%E6%95%B0%E5%AD%A6/"><span class="level-start"><span class="level-item">3D游戏与图形学的数学</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/LearnOpenGL/"><span class="level-start"><span class="level-item">LearnOpenGL</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Real-Time-Rendering-4th/"><span class="level-start"><span class="level-item">Real Time Rendering 4th</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%91%E6%8C%87Offer/"><span class="level-start"><span class="level-item">剑指Offer</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E5%88%92-Flags/"><span class="level-start"><span class="level-item">计划-Flags</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2021-03-13T03:28:19.000Z">2021-03-13</time></p><p class="title"><a href="/2021/03/13/plan-2021-03/">3月的计划</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E5%88%92-Flags/">计划-Flags</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-02-02T12:05:19.000Z">2021-02-02</time></p><p class="title"><a href="/2021/02/02/plan-2021-02/">2月的计划</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E5%88%92-Flags/">计划-Flags</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-01-26T13:34:18.000Z">2021-01-26</time></p><p class="title"><a href="/2021/01/26/learnopengl-c2/">《LearnOpenGL》光照 笔记</a></p><p class="categories"><a href="/categories/LearnOpenGL/">LearnOpenGL</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-01-24T01:26:52.000Z">2021-01-24</time></p><p class="title"><a href="/2021/01/24/leetcode-200-select/">《LeetCode》精选200题计划</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E5%88%92-Flags/">计划-Flags</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-01-23T11:46:18.000Z">2021-01-23</time></p><p class="title"><a href="/2021/01/23/learnopengl-c1/">《LearnOpenGL》入门 笔记</a></p><p class="categories"><a href="/categories/LearnOpenGL/">LearnOpenGL</a></p></div></article></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#1-面试官谈代码质量"><span class="level-left"><span class="level-item">1 面试官谈代码质量</span></span></a></li><li><a class="level is-mobile" href="#2-代码的规范性"><span class="level-left"><span class="level-item">2 代码的规范性</span></span></a></li><li><a class="level is-mobile" href="#3-代码的完整性"><span class="level-left"><span class="level-item">3 代码的完整性</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-1-3个方面确保完整性"><span class="level-left"><span class="level-item">3.1 3个方面确保完整性</span></span></a></li><li><a class="level is-mobile" href="#3-2-3种错误处理的方法"><span class="level-left"><span class="level-item">3.2 3种错误处理的方法</span></span></a></li><li><a class="level is-mobile" href="#3-3-面试题-16-21"><span class="level-left"><span class="level-item">3.3 面试题 16-21</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-代码的鲁棒性"><span class="level-left"><span class="level-item">4 代码的鲁棒性</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/logo.jpg" alt="画码余生" height="28"></a><p class="is-size-7"><span>&copy; 2021 Yumiko</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/yumi-cn"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.js" defer></script><script>window.addEventListener("load",function(){document.querySelectorAll('[role="article"] > .content').forEach(function(e){renderMathInElement(e)})})</script><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){loadInsight({contentUrl:"/content.json"},{hint:"想要查找什么...",untitled:"(无标题)",posts:"文章",pages:"页面",categories:"专栏",tags:"主题"})})</script></body></html>